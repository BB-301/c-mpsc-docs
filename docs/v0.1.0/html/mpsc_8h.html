<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>lib&lt;mpsc&gt;: include/mpsc.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">lib&lt;mpsc&gt;<span id="projectnumber">&#160;0.1.0</span>
   </div>
   <div id="projectbrief">A C POSIX multi-thread based multiple producers, single consumer (MPSC) channel library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">mpsc.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">stdbool.h</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stddef.h.0p.html">stddef.h</a>&gt;</code><br />
</div>
<p><a href="mpsc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structmpsc__create__params__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#structmpsc__create__params__t">mpsc_create_params_t</a></td></tr>
<tr class="separator:structmpsc__create__params__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:adab514e353838b0b7710a1786283b64b"><td class="memItemLeft" align="right" valign="top">typedef struct mpsc_s&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a></td></tr>
<tr class="separator:adab514e353838b0b7710a1786283b64b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68fa396085b638a05fb40813e98304d2"><td class="memItemLeft" align="right" valign="top"><a id="a68fa396085b638a05fb40813e98304d2" name="a68fa396085b638a05fb40813e98304d2"></a>
typedef struct mpsc_consumer_s&#160;</td><td class="memItemRight" valign="bottom"><b>mpsc_consumer_t</b></td></tr>
<tr class="separator:a68fa396085b638a05fb40813e98304d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31b0d44b26d8555554b36edc92fa1d89"><td class="memItemLeft" align="right" valign="top"><a id="a31b0d44b26d8555554b36edc92fa1d89" name="a31b0d44b26d8555554b36edc92fa1d89"></a>
typedef struct mpsc_producer_s&#160;</td><td class="memItemRight" valign="bottom"><b>mpsc_producer_t</b></td></tr>
<tr class="separator:a31b0d44b26d8555554b36edc92fa1d89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b4d9265cf2d604242a8c047c99663f"><td class="memItemLeft" align="right" valign="top">typedef <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#a88b4d9265cf2d604242a8c047c99663f">mpsc_producer_thread_callback_t</a>(<a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *producer)</td></tr>
<tr class="separator:a88b4d9265cf2d604242a8c047c99663f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0eb1eba22305e2a14f2ee80b5c151b"><td class="memItemLeft" align="right" valign="top">typedef <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#ace0eb1eba22305e2a14f2ee80b5c151b">mpsc_consumer_callback_t</a>(<a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> *consumer, <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *data, <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">size_t</a> n, <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a> closed)</td></tr>
<tr class="separator:ace0eb1eba22305e2a14f2ee80b5c151b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32923363e5e4c53ffecf56dbba379d57"><td class="memItemLeft" align="right" valign="top">typedef <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#a32923363e5e4c53ffecf56dbba379d57">mpsc_consumer_error_callback_t</a>(<a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> *consumer)</td></tr>
<tr class="separator:a32923363e5e4c53ffecf56dbba379d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ad044672ed6f5c21e650cc61c0f2faed1"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> { <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1ae1157dd4e2767bc00603e648f44fd4d2">MPSC_REGISTER_PRODUCER_ERROR_NONE</a> = 0
, <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1a418c3f4aa17a14573bf2e11816a45ddb">MPSC_REGISTER_PRODUCER_ERROR_CLOSED</a> = 1
, <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1a3be4b8eb0ab0fec1645543eac1ce5149">MPSC_REGISTER_PRODUCER_ERROR_N_MAX_PRODUCERS_REACHED</a> = 2
, <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1a0b57fd794529820efc618609ca5732c2">MPSC_REGISTER_PRODUCER_ERROR_EAGAIN</a> = 3
 }</td></tr>
<tr class="separator:ad044672ed6f5c21e650cc61c0f2faed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2607f2f926ef5b9bc30a214f96a75c85"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85">mpsc_create</a> (<a class="el" href="mpsc_8h.html#structmpsc__create__params__t">mpsc_create_params_t</a> params)</td></tr>
<tr class="separator:a2607f2f926ef5b9bc30a214f96a75c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69c9a697464e5dfe99165a50de2d8a85"><td class="memItemLeft" align="right" valign="top"><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#a69c9a697464e5dfe99165a50de2d8a85">mpsc_join</a> (<a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> *self)</td></tr>
<tr class="separator:a69c9a697464e5dfe99165a50de2d8a85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3082240dc5d5af76d3cf8926121a781b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b">mpsc_register_producer</a> (<a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> *self, <a class="el" href="mpsc_8h.html#a88b4d9265cf2d604242a8c047c99663f">mpsc_producer_thread_callback_t</a> callback, <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *context)</td></tr>
<tr class="separator:a3082240dc5d5af76d3cf8926121a781b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a54610d773504b7ef7c6ed4470e62ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#a3a54610d773504b7ef7c6ed4470e62ef">mpsc_consumer_register_producer</a> (<a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> *self, <a class="el" href="mpsc_8h.html#a88b4d9265cf2d604242a8c047c99663f">mpsc_producer_thread_callback_t</a> callback, <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *context)</td></tr>
<tr class="separator:a3a54610d773504b7ef7c6ed4470e62ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae267b95df46e0d29de99e1e5d61a0a71"><td class="memItemLeft" align="right" valign="top"><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#ae267b95df46e0d29de99e1e5d61a0a71">mpsc_consumer_close</a> (<a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> *self)</td></tr>
<tr class="separator:ae267b95df46e0d29de99e1e5d61a0a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5de01421741cdeb95863c6e8e9ebd12"><td class="memItemLeft" align="right" valign="top"><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#aa5de01421741cdeb95863c6e8e9ebd12">mpsc_producer_ping</a> (<a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *self)</td></tr>
<tr class="separator:aa5de01421741cdeb95863c6e8e9ebd12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795dcdec3e2e202d4f737c576d8d8ebc"><td class="memItemLeft" align="right" valign="top"><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#a795dcdec3e2e202d4f737c576d8d8ebc">mpsc_producer_send</a> (<a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *self, <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *data, <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">size_t</a> n)</td></tr>
<tr class="separator:a795dcdec3e2e202d4f737c576d8d8ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90ba868061d38426ac5ccdcda3c9c8de"><td class="memItemLeft" align="right" valign="top"><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#a90ba868061d38426ac5ccdcda3c9c8de">mpsc_producer_send_empty</a> (<a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *self)</td></tr>
<tr class="separator:a90ba868061d38426ac5ccdcda3c9c8de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9285fa056335c00331115b9f899abc3"><td class="memItemLeft" align="right" valign="top"><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#ab9285fa056335c00331115b9f899abc3">mpsc_producer_context</a> (<a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *self)</td></tr>
<tr class="separator:ab9285fa056335c00331115b9f899abc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addf258ef9e9e9b16193f3478b7a62b4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpsc_8h.html#addf258ef9e9e9b16193f3478b7a62b4d">mpsc_producer_register_producer</a> (<a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *self, <a class="el" href="mpsc_8h.html#a88b4d9265cf2d604242a8c047c99663f">mpsc_producer_thread_callback_t</a> callback, <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *context)</td></tr>
<tr class="separator:addf258ef9e9e9b16193f3478b7a62b4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structmpsc__create__params__t" id="structmpsc__create__params__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structmpsc__create__params__t">&#9670;&#160;</a></span>mpsc_create_params_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mpsc_create_params_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>The structure that must be passed to <a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85">mpsc_create</a> to instantiate a new <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> object. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85" title="The function used to create a new channel instance (i.e., a mpsc_t instance).">mpsc_create</a> </dd></dl>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="adabf5b17122f5dda9091eb0faff6452e" name="adabf5b17122f5dda9091eb0faff6452e"></a><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">size_t</a></td>
<td class="fieldname">
buffer_size</td>
<td class="fielddoc">
The size (in bytes) of the internal buffer used to transfer a message between a producer and the consumer. <dl class="section note"><dt>Note</dt><dd>- This acts as the upper bound of a message size for the <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance. Calling <a class="el" href="mpsc_8h.html#a795dcdec3e2e202d4f737c576d8d8ebc">mpsc_producer_send</a> with a message of size exceeding this value will cause the process to be terminated, regardless of <code>error_handling_enabled</code>'s value. </dd>
<dd>
- This value can be set to 0 if the application only requires empty messages, or if it does not need to send messages at all. </dd></dl>
</td></tr>
<tr><td class="fieldtype">
<a id="af58e7deeb2c0b68ee0528355e980ede8" name="af58e7deeb2c0b68ee0528355e980ede8"></a><a class="el" href="mpsc_8h.html#ace0eb1eba22305e2a14f2ee80b5c151b">mpsc_consumer_callback_t</a> *</td>
<td class="fieldname">
consumer_callback</td>
<td class="fielddoc">
The application defined consumer callback function to be used to received messages for the <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance. </td></tr>
<tr><td class="fieldtype">
<a id="acb508f3cb93dc26f54b04feb78aff96a" name="acb508f3cb93dc26f54b04feb78aff96a"></a><a class="el" href="mpsc_8h.html#a32923363e5e4c53ffecf56dbba379d57">mpsc_consumer_error_callback_t</a> *</td>
<td class="fieldname">
consumer_error_callback</td>
<td class="fielddoc">
An optional, application defined producer thread callback function used, when <code>error_handling_enabled = true</code>, to deliver potential internal errors to the application, in which case <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">errno</a> should be checked for more information. <dl class="section note"><dt>Note</dt><dd>As explained in the <a class="el" href="mpsc_8h.html#a32923363e5e4c53ffecf56dbba379d57">mpsc_consumer_error_callback_t</a> documentation, the only possible such error at the moment is <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">ENOMEM</a> , which could arise from a failed internal call to <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/malloc.3p.html">malloc</a> to allocate space where to copy the message from the internal buffer before passing that new memory to the <code>consumer_callback</code> function's <code>data</code> argument. </dd></dl>
</td></tr>
<tr><td class="fieldtype">
<a id="a87cf00159597aac9c5e65d1fa0fca0fc" name="a87cf00159597aac9c5e65d1fa0fca0fc"></a><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a></td>
<td class="fieldname">
create_and_join_thread_safety_disabled</td>
<td class="fielddoc">
A boolean value that can be used to disable the safety feature that prevents <a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85">mpsc_create</a> and <a class="el" href="mpsc_8h.html#a69c9a697464e5dfe99165a50de2d8a85">mpsc_join</a> to be called on distinct threads for the same <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance. </td></tr>
<tr><td class="fieldtype">
<a id="a2ed612bf5fd5cccaa285d3f348a244d4" name="a2ed612bf5fd5cccaa285d3f348a244d4"></a><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a></td>
<td class="fieldname">
error_handling_enabled</td>
<td class="fielddoc">
A boolean value indicating whether (<code>true</code>) error handling should be handed over to the application or whether (<code>false</code>) errors should be printed to <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/stdout.3.html">stderr</a> and the process be terminated. <dl class="section note"><dt>Note</dt><dd>Not all errors can be handled, but those that can may occur at three different levels:<ol type="1">
<li>When calling <a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85">mpsc_create</a> (the returned value could be the <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">NULL</a> pointer, in which case <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">errno</a> should be checked for details about the error, which will be related to resources exhaustion; i.e., <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">ENOMEM</a> or <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">EAGAIN</a> ).</li>
<li>When calling <a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b">mpsc_register_producer</a>, as well as the <a class="el" href="mpsc_8h.html#a3a54610d773504b7ef7c6ed4470e62ef">mpsc_consumer_register_producer</a> and <a class="el" href="mpsc_8h.html#addf258ef9e9e9b16193f3478b7a62b4d">mpsc_producer_register_producer</a> aliases (which will allow the <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> error of type <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1a0b57fd794529820efc618609ca5732c2">MPSC_REGISTER_PRODUCER_ERROR_EAGAIN</a> to be returned, instead of terminating the process).</li>
<li>As a result of the internal consumer thread not being able to allocate memory needed to hold a copy of the message temporarily stored inside the internal buffer by a producer for delivery to the consumer callback. Such an error will be communicated to the application through the <code>consumer_error_callback</code> when <code>error_handling_enabled = true</code>, else will result in the process being terminated. </li>
</ol>
</dd></dl>
</td></tr>
<tr><td class="fieldtype">
<a id="a85f5f25b3517d01412296e4087b3e901" name="a85f5f25b3517d01412296e4087b3e901"></a><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">size_t</a></td>
<td class="fieldname">
n_max_producers</td>
<td class="fielddoc">
The maximum number of producers that can be registered on the <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance. <dl class="section note"><dt>Note</dt><dd>- This value must be greater than 0, else the process will be terminated. </dd>
<dd>
- Calling <a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b">mpsc_register_producer</a> when this value has been reached will result in a <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> error of type <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1a3be4b8eb0ab0fec1645543eac1ce5149">MPSC_REGISTER_PRODUCER_ERROR_N_MAX_PRODUCERS_REACHED</a> . </dd></dl>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ace0eb1eba22305e2a14f2ee80b5c151b" name="ace0eb1eba22305e2a14f2ee80b5c151b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace0eb1eba22305e2a14f2ee80b5c151b">&#9670;&#160;</a></span>mpsc_consumer_callback_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a>() mpsc_consumer_callback_t(<a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> *consumer, <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *data, <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">size_t</a> n, <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a> closed)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The signature of the consumer callback function, to be declared and implemented by the application, which is passed as a parameter to the <a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85">mpsc_create</a> function when instantiating a new channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">consumer</td><td>A pointer to a <a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> instance for which the callback is being executed. </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to dynamically allocated memory containing the message sent by a producer to the consumer. </td></tr>
    <tr><td class="paramname">n</td><td>The size (in bytes) of <code>data</code> . </td></tr>
    <tr><td class="paramname">closed</td><td>A boolean value indicating whether the channel (i.e., the <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance) has been marked as closed, in which case the callback won't be called again for the given <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85" title="The function used to create a new channel instance (i.e., a mpsc_t instance).">mpsc_create</a>, <a class="el" href="mpsc_8h.html#structmpsc__create__params__t" title="The structure that must be passed to mpsc_create to instantiate a new mpsc_t object.">mpsc_create_params_t</a> </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>When <code>n</code> is non-zero, <code>data</code> refers to dynamically allocated memory that is the responsibility of the callback. In other words, as soon as <code>data</code> is no longer needed, it should be freed using <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/free.3p.html">free</a> , else memory will be leaked. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>- There are two scenarios that can cause the <code>closed</code> argument to be <code>true</code>: (1) the <a class="el" href="mpsc_8h.html#ae267b95df46e0d29de99e1e5d61a0a71">mpsc_consumer_close</a> function was called on <code>consumer</code> from inside the callback or (2) the <a class="el" href="mpsc_8h.html#a69c9a697464e5dfe99165a50de2d8a85">mpsc_join</a> function has been called on the channel object and all producer threads have returned. </dd>
<dd>
- The callback should return as quick as possible to avoid blocking the consumer thread. Blocking tasks, if required, should be offloaded to other threads and the callback should return as quick as possible. </dd>
<dd>
- When <code>n</code> is set to 0, <code>data</code> will be set to <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">NULL</a> . </dd></dl>

</div>
</div>
<a id="a32923363e5e4c53ffecf56dbba379d57" name="a32923363e5e4c53ffecf56dbba379d57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32923363e5e4c53ffecf56dbba379d57">&#9670;&#160;</a></span>mpsc_consumer_error_callback_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a>() mpsc_consumer_error_callback_t(<a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> *consumer)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The signature of an optional consumer error callback function, to be declared and implemented by the application, which is passed as a parameter to the <a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85">mpsc_create</a> function when instantiating a new channel. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85" title="The function used to create a new channel instance (i.e., a mpsc_t instance).">mpsc_create</a>, <a class="el" href="mpsc_8h.html#structmpsc__create__params__t" title="The structure that must be passed to mpsc_create to instantiate a new mpsc_t object.">mpsc_create_params_t</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>- This callback is ignored when <a class="el" href="mpsc_8h.html#structmpsc__create__params__t">mpsc_create_params_t</a> 's <code>error_handling_enabled</code> is set to <code>false</code>, in which case, when an error occurs, information about that error is printed to <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/stdout.3.html">stderr</a> and the process is terminated. </dd>
<dd>
- When executed for <code>consumer</code> (i.e., the specific <a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> instance), the application should look at <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">errno</a> for information about the encountered error. Currently, the only possible error is <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">ENOMEM</a>, which arises from a failed internal call to <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/malloc.3p.html">malloc</a> . </dd></dl>

</div>
</div>
<a id="a88b4d9265cf2d604242a8c047c99663f" name="a88b4d9265cf2d604242a8c047c99663f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b4d9265cf2d604242a8c047c99663f">&#9670;&#160;</a></span>mpsc_producer_thread_callback_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a>() mpsc_producer_thread_callback_t(<a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *producer)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The signature of the producer thread callback function, to be declared and implemented by the application, which is passed as a parameter to the <a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b">mpsc_register_producer</a> function when registering a producer for a given <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">producer</td><td>A pointer to a <a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> instance for which the callback is being executed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b" title="The function used to register a new producer for self .">mpsc_register_producer</a>, <a class="el" href="mpsc_8h.html#a3a54610d773504b7ef7c6ed4470e62ef" title="An alias for mpsc_register_producer , but which is used on an object of type mpsc_consumer_t ,...">mpsc_consumer_register_producer</a>, <a class="el" href="mpsc_8h.html#addf258ef9e9e9b16193f3478b7a62b4d" title="An alias for mpsc_register_producer , but which is used on an object of type mpsc_producer_t ,...">mpsc_producer_register_producer</a> </dd></dl>

</div>
</div>
<a id="adab514e353838b0b7710a1786283b64b" name="adab514e353838b0b7710a1786283b64b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adab514e353838b0b7710a1786283b64b">&#9670;&#160;</a></span>mpsc_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct mpsc_s <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An opaque data type used as a container for the MPSC channel data. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85" title="The function used to create a new channel instance (i.e., a mpsc_t instance).">mpsc_create</a>, <a class="el" href="mpsc_8h.html#a69c9a697464e5dfe99165a50de2d8a85" title="The function that must be called on self to wait for the channel close.">mpsc_join</a> </dd></dl>
<dl class="section user"><dt>Example:</dt><dd><div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Copyright (c) 2024 BB-301 &lt;fw3dg3@gmail.com&gt;</span></div>
<div class="line"><span class="comment">    [Official repository](https://github.com/BB-301/c-mpsc)</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    Permission is hereby granted, free of charge, to any person</span></div>
<div class="line"><span class="comment">    obtaining a copy of this software and associated documentation</span></div>
<div class="line"><span class="comment">    files (the “Software”), to deal in the Software without restriction,</span></div>
<div class="line"><span class="comment">    including without limitation the rights to use, copy, modify, merge,</span></div>
<div class="line"><span class="comment">    publish, distribute, sublicense, and/or sell copies of the Software,</span></div>
<div class="line"><span class="comment">    and to permit persons to whom the Software is furnished to do so,</span></div>
<div class="line"><span class="comment">    subject to the following conditions:</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    The above copyright notice and this permission notice shall be included</span></div>
<div class="line"><span class="comment">    in all copies or substantial portions of the Software.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div>
<div class="line"><span class="comment">    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><span class="comment">    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div>
<div class="line"><span class="comment">    THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div>
<div class="line"><span class="comment">    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div>
<div class="line"><span class="comment">    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div>
<div class="line"><span class="comment">    THE SOFTWARE.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    ======================</span></div>
<div class="line"><span class="comment">    Example: Quick example</span></div>
<div class="line"><span class="comment">    ======================</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    This is a quick &quot;getting started&quot; example used to illustrate</span></div>
<div class="line"><span class="comment">    the basic structure of a program using lib&lt;mpsc&gt;. This example</span></div>
<div class="line"><span class="comment">    is featured in the [repository](https://github.com/BB-301/c-mpsc)&#39;s</span></div>
<div class="line"><span class="comment">    README.md file.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="codeRef" target="_blank" href="https://man7.org/linux/man-pages/man3/assert.3.html">assert.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="codeRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">stdbool.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="codeRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdio.h.0p.html">stdio.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="codeRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdlib.h.0p.html">stdlib.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="mpsc_8h.html">mpsc.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define IGNORE_UNUSED(m) ((void)(m))</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define TEXT_BUFFER_SIZE (100)</span></div>
<div class="line"><span class="preprocessor">#define N_PRODUCERS (8)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> my_consumer_callback(<a class="code hl_typedef" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> *consumer, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> n, <span class="keywordtype">bool</span> closed);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> my_producer_thread_callback(<a class="code hl_typedef" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *producer);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>my_message</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> text[TEXT_BUFFER_SIZE];</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>my_producer_thread_callback_context</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">size_t</span> id;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> *mpsc = <a class="code hl_function" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85">mpsc_create</a>((<a class="code hl_struct" href="mpsc_8h.html#structmpsc__create__params__t">mpsc_create_params_t</a>){</div>
<div class="line">        .buffer_size = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>my_message),</div>
<div class="line">        .n_max_producers = N_PRODUCERS,</div>
<div class="line">        .consumer_callback = my_consumer_callback,</div>
<div class="line">        .consumer_error_callback = <a class="code hl_typedefRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">NULL</a>,</div>
<div class="line">        .error_handling_enabled = <span class="keyword">false</span>,</div>
<div class="line">        .create_and_join_thread_safety_disabled = <span class="keyword">false</span>,</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>my_producer_thread_callback_context contexts[N_PRODUCERS];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; N_PRODUCERS; i++)</div>
<div class="line">    {</div>
<div class="line">        contexts[i].id = i + 1;</div>
<div class="line">        <a class="code hl_functionRef" target="_blank" href="https://man7.org/linux/man-pages/man3/assert.3.html">assert</a>(<a class="code hl_function" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b">mpsc_register_producer</a>(mpsc, my_producer_thread_callback, &amp;contexts[i]) == <a class="code hl_enumvalue" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1ae1157dd4e2767bc00603e648f44fd4d2">MPSC_REGISTER_PRODUCER_ERROR_NONE</a>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="mpsc_8h.html#a69c9a697464e5dfe99165a50de2d8a85">mpsc_join</a>(mpsc);</div>
<div class="line"> </div>
<div class="line">    exit(EXIT_SUCCESS);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> my_consumer_callback(<a class="code hl_typedef" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> *consumer, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> n, <span class="keywordtype">bool</span> closed)</div>
<div class="line">{</div>
<div class="line">    IGNORE_UNUSED(consumer);</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">size_t</span> counter = 0;</div>
<div class="line">    counter += 1;</div>
<div class="line">    <span class="keywordflow">if</span> (closed)</div>
<div class="line">    {</div>
<div class="line">        fprintf(<a class="code hl_typedefRef" target="_blank" href="https://man7.org/linux/man-pages/man3/stdout.3.html">stdout</a>, <span class="stringliteral">&quot;[consumer:%zu] closed\n&quot;</span>, counter);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (n != <span class="keyword">sizeof</span>(<span class="keyword">struct</span> my_message))</div>
<div class="line">    {</div>
<div class="line">        fprintf(<a class="code hl_typedefRef" target="_blank" href="https://man7.org/linux/man-pages/man3/stdout.3.html">stderr</a>, <span class="stringliteral">&quot;[consumer] Error: Unexpected message size\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">struct </span>my_message *message = data;</div>
<div class="line">    fprintf(<a class="code hl_typedefRef" target="_blank" href="https://man7.org/linux/man-pages/man3/stdout.3.html">stdout</a>, <span class="stringliteral">&quot;[consumer:%zu] %s\n&quot;</span>, counter, message-&gt;text);</div>
<div class="line">    <a class="code hl_functionRef" target="_blank" href="https://man7.org/linux/man-pages/man3/free.3p.html">free</a>(data);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> my_producer_thread_callback(<a class="code hl_typedef" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *producer)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>my_producer_thread_callback_context *ctx = <a class="code hl_function" href="mpsc_8h.html#ab9285fa056335c00331115b9f899abc3">mpsc_producer_context</a>(producer);</div>
<div class="line">    <span class="keyword">struct </span>my_message message;</div>
<div class="line">    sprintf(message.text, <span class="stringliteral">&quot;Hello from producer #%zu!&quot;</span>, ctx-&gt;id);</div>
<div class="line">    <a class="code hl_functionRef" target="_blank" href="https://man7.org/linux/man-pages/man3/assert.3.html">assert</a>(<a class="code hl_function" href="mpsc_8h.html#a795dcdec3e2e202d4f737c576d8d8ebc">mpsc_producer_send</a>(producer, &amp;message, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> my_message)));</div>
<div class="line">}</div>
<div class="ttc" id="aassert.3_html"><div class="ttname"><a href="https://man7.org/linux/man-pages/man3/assert.3.html">assert.h</a></div></div>
<div class="ttc" id="afree.3p_html"><div class="ttname"><a href="https://man7.org/linux/man-pages/man3/free.3p.html">free</a></div><div class="ttdeci">free free(void *ptr)</div></div>
<div class="ttc" id="ampsc_8h_html"><div class="ttname"><a href="mpsc_8h.html">mpsc.h</a></div></div>
<div class="ttc" id="ampsc_8h_html_a2607f2f926ef5b9bc30a214f96a75c85"><div class="ttname"><a href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85">mpsc_create</a></div><div class="ttdeci">mpsc_t * mpsc_create(mpsc_create_params_t params)</div><div class="ttdoc">The function used to create a new channel instance (i.e., a mpsc_t instance).</div></div>
<div class="ttc" id="ampsc_8h_html_a3082240dc5d5af76d3cf8926121a781b"><div class="ttname"><a href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b">mpsc_register_producer</a></div><div class="ttdeci">mpsc_register_producer_error_t mpsc_register_producer(mpsc_t *self, mpsc_producer_thread_callback_t callback, void *context)</div><div class="ttdoc">The function used to register a new producer for self .</div></div>
<div class="ttc" id="ampsc_8h_html_a31b0d44b26d8555554b36edc92fa1d89"><div class="ttname"><a href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a></div><div class="ttdeci">struct mpsc_producer_s mpsc_producer_t</div><div class="ttdoc">An opaque data type used as a container for a MPSC channel's producer.</div><div class="ttdef"><b>Definition:</b> mpsc.h:86</div></div>
<div class="ttc" id="ampsc_8h_html_a68fa396085b638a05fb40813e98304d2"><div class="ttname"><a href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a></div><div class="ttdeci">struct mpsc_consumer_s mpsc_consumer_t</div><div class="ttdoc">An opaque data type used as a container for the MPSC channel's consumer.</div><div class="ttdef"><b>Definition:</b> mpsc.h:80</div></div>
<div class="ttc" id="ampsc_8h_html_a69c9a697464e5dfe99165a50de2d8a85"><div class="ttname"><a href="mpsc_8h.html#a69c9a697464e5dfe99165a50de2d8a85">mpsc_join</a></div><div class="ttdeci">void mpsc_join(mpsc_t *self)</div><div class="ttdoc">The function that must be called on self to wait for the channel close.</div></div>
<div class="ttc" id="ampsc_8h_html_a795dcdec3e2e202d4f737c576d8d8ebc"><div class="ttname"><a href="mpsc_8h.html#a795dcdec3e2e202d4f737c576d8d8ebc">mpsc_producer_send</a></div><div class="ttdeci">bool mpsc_producer_send(mpsc_producer_t *self, void *data, size_t n)</div><div class="ttdoc">The function used (from inside a producer thread callback function) to send a message to the channel'...</div></div>
<div class="ttc" id="ampsc_8h_html_ab9285fa056335c00331115b9f899abc3"><div class="ttname"><a href="mpsc_8h.html#ab9285fa056335c00331115b9f899abc3">mpsc_producer_context</a></div><div class="ttdeci">void * mpsc_producer_context(mpsc_producer_t *self)</div><div class="ttdoc">A function that can be used from inside the producer thread callback function to retrieve the applica...</div></div>
<div class="ttc" id="ampsc_8h_html_ad044672ed6f5c21e650cc61c0f2faed1ae1157dd4e2767bc00603e648f44fd4d2"><div class="ttname"><a href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1ae1157dd4e2767bc00603e648f44fd4d2">MPSC_REGISTER_PRODUCER_ERROR_NONE</a></div><div class="ttdeci">@ MPSC_REGISTER_PRODUCER_ERROR_NONE</div><div class="ttdoc">The producer was successfully registered.</div><div class="ttdef"><b>Definition:</b> mpsc.h:47</div></div>
<div class="ttc" id="ampsc_8h_html_adab514e353838b0b7710a1786283b64b"><div class="ttname"><a href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a></div><div class="ttdeci">struct mpsc_s mpsc_t</div><div class="ttdoc">An opaque data type used as a container for the MPSC channel data.</div><div class="ttdef"><b>Definition:</b> mpsc.h:74</div></div>
<div class="ttc" id="ampsc_8h_html_structmpsc__create__params__t"><div class="ttname"><a href="mpsc_8h.html#structmpsc__create__params__t">mpsc_create_params_t</a></div><div class="ttdoc">The structure that must be passed to mpsc_create to instantiate a new mpsc_t object.</div><div class="ttdef"><b>Definition:</b> mpsc.h:145</div></div>
<div class="ttc" id="asize_t.3type_html"><div class="ttname"><a href="https://man7.org/linux/man-pages/man3/size_t.3type.html">NULL</a></div><div class="ttdeci">NULL NULL</div></div>
<div class="ttc" id="astdbool.h.0p_html"><div class="ttname"><a href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">stdbool.h</a></div></div>
<div class="ttc" id="astdio.h.0p_html"><div class="ttname"><a href="https://man7.org/linux/man-pages/man0/stdio.h.0p.html">stdio.h</a></div></div>
<div class="ttc" id="astdlib.h.0p_html"><div class="ttname"><a href="https://man7.org/linux/man-pages/man0/stdlib.h.0p.html">stdlib.h</a></div></div>
<div class="ttc" id="astdout.3_html"><div class="ttname"><a href="https://man7.org/linux/man-pages/man3/stdout.3.html">stdout</a></div><div class="ttdeci">FILE stdout</div></div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ad044672ed6f5c21e650cc61c0f2faed1" name="ad044672ed6f5c21e650cc61c0f2faed1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad044672ed6f5c21e650cc61c0f2faed1">&#9670;&#160;</a></span>mpsc_register_producer_error_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type returned by <a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b">mpsc_register_producer</a> (as well as by its aliases; i.e., <a class="el" href="mpsc_8h.html#addf258ef9e9e9b16193f3478b7a62b4d">mpsc_producer_register_producer</a> and <a class="el" href="mpsc_8h.html#a3a54610d773504b7ef7c6ed4470e62ef">mpsc_consumer_register_producer</a> ) when trying to register a new producer on a <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance, and which indicates whether an error occurred. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b" title="The function used to register a new producer for self .">mpsc_register_producer</a>, <a class="el" href="mpsc_8h.html#a3a54610d773504b7ef7c6ed4470e62ef" title="An alias for mpsc_register_producer , but which is used on an object of type mpsc_consumer_t ,...">mpsc_consumer_register_producer</a>, <a class="el" href="mpsc_8h.html#addf258ef9e9e9b16193f3478b7a62b4d" title="An alias for mpsc_register_producer , but which is used on an object of type mpsc_producer_t ,...">mpsc_producer_register_producer</a> </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad044672ed6f5c21e650cc61c0f2faed1ae1157dd4e2767bc00603e648f44fd4d2" name="ad044672ed6f5c21e650cc61c0f2faed1ae1157dd4e2767bc00603e648f44fd4d2"></a>MPSC_REGISTER_PRODUCER_ERROR_NONE&#160;</td><td class="fielddoc"><p>The producer was successfully registered. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad044672ed6f5c21e650cc61c0f2faed1a418c3f4aa17a14573bf2e11816a45ddb" name="ad044672ed6f5c21e650cc61c0f2faed1a418c3f4aa17a14573bf2e11816a45ddb"></a>MPSC_REGISTER_PRODUCER_ERROR_CLOSED&#160;</td><td class="fielddoc"><p>The producer could not be registered because the <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance has internally been marked as <code>closed</code> (i.e., the channel has been closed). </p>
</td></tr>
<tr><td class="fieldname"><a id="ad044672ed6f5c21e650cc61c0f2faed1a3be4b8eb0ab0fec1645543eac1ce5149" name="ad044672ed6f5c21e650cc61c0f2faed1a3be4b8eb0ab0fec1645543eac1ce5149"></a>MPSC_REGISTER_PRODUCER_ERROR_N_MAX_PRODUCERS_REACHED&#160;</td><td class="fielddoc"><p>The producer could not be registered because the maximum number of producers allowed (i.e., <code>n_max_producers</code>) in the <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance has been reached. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad044672ed6f5c21e650cc61c0f2faed1a0b57fd794529820efc618609ca5732c2" name="ad044672ed6f5c21e650cc61c0f2faed1a0b57fd794529820efc618609ca5732c2"></a>MPSC_REGISTER_PRODUCER_ERROR_EAGAIN&#160;</td><td class="fielddoc"><p>The producer could not be registered because a <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">EAGAIN</a> error was observed when, internally, while trying to create a new thread using <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/pthread_create.3.html">pthread_create</a> . </p>
<dl class="section note"><dt>Note</dt><dd>When <a class="el" href="mpsc_8h.html#structmpsc__create__params__t">mpsc_create_params_t</a> 's <code>error_handling_enabled</code> is set to <code>false</code>, this error will not be returned and will instead result in the process being terminated. </dd></dl>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae267b95df46e0d29de99e1e5d61a0a71" name="ae267b95df46e0d29de99e1e5d61a0a71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae267b95df46e0d29de99e1e5d61a0a71">&#9670;&#160;</a></span>mpsc_consumer_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> mpsc_consumer_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function that can be used (from inside the application defined consumer callback implementing <a class="el" href="mpsc_8h.html#ace0eb1eba22305e2a14f2ee80b5c151b">mpsc_consumer_callback_t</a> ) on the consumer object <code>self</code> to notify the channel's internal consumer thread that it should return. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A pointer to a <a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> instance whose parent object (a <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance) should be marked as closed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>- Before returning, the internal consumer thread will call the <a class="el" href="mpsc_8h.html#ace0eb1eba22305e2a14f2ee80b5c151b">mpsc_consumer_callback_t</a> one last time with the <code>closed</code> argument marked as <code>true</code>. </dd>
<dd>
- The <a class="el" href="mpsc_8h.html#ace0eb1eba22305e2a14f2ee80b5c151b">mpsc_consumer_callback_t</a> could also receive a call with <code>closed = true</code> if all producer threads have returned and <a class="el" href="mpsc_8h.html#a69c9a697464e5dfe99165a50de2d8a85">mpsc_join</a> has been called. </dd></dl>

</div>
</div>
<a id="a3a54610d773504b7ef7c6ed4470e62ef" name="a3a54610d773504b7ef7c6ed4470e62ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a54610d773504b7ef7c6ed4470e62ef">&#9670;&#160;</a></span>mpsc_consumer_register_producer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> mpsc_consumer_register_producer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#a88b4d9265cf2d604242a8c047c99663f">mpsc_producer_thread_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An alias for <a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b">mpsc_register_producer</a> , but which is used on an object of type <a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> , to try to register a producer for <code>self</code> 's parent channel object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A pointer to the <a class="el" href="mpsc_8h.html#a68fa396085b638a05fb40813e98304d2">mpsc_consumer_t</a> object for whose parent (i.e., a <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance) to register a new producer. </td></tr>
    <tr><td class="paramname">callback</td><td>An application defined thread callback function, which conforms to the <a class="el" href="mpsc_8h.html#a88b4d9265cf2d604242a8c047c99663f">mpsc_producer_thread_callback_t</a> interface, to be used by the producer. </td></tr>
    <tr><td class="paramname">context</td><td>An application defined context object that can be retrieved from inside <code>callback</code> by calling the <a class="el" href="mpsc_8h.html#ab9285fa056335c00331115b9f899abc3">mpsc_producer_context</a> function on the <code>callback</code> 's <a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> A value used to report a potential error with the call. Please read the documentation for <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> for more information about the potential errors. A successful call will return <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1ae1157dd4e2767bc00603e648f44fd4d2">MPSC_REGISTER_PRODUCER_ERROR_NONE</a> . </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b" title="The function used to register a new producer for self .">mpsc_register_producer</a>, <a class="el" href="mpsc_8h.html#addf258ef9e9e9b16193f3478b7a62b4d" title="An alias for mpsc_register_producer , but which is used on an object of type mpsc_producer_t ,...">mpsc_producer_register_producer</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function exists for situations in which a consumer would like to register other producers to the same channel. </dd></dl>

</div>
</div>
<a id="a2607f2f926ef5b9bc30a214f96a75c85" name="a2607f2f926ef5b9bc30a214f96a75c85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2607f2f926ef5b9bc30a214f96a75c85">&#9670;&#160;</a></span>mpsc_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> * mpsc_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#structmpsc__create__params__t">mpsc_create_params_t</a>&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The function used to create a new channel instance (i.e., a <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>The instance's configurations. (Note: See documentation for <a class="el" href="mpsc_8h.html#structmpsc__create__params__t">mpsc_create_params_t</a> for the details). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a>* A pointer to the created <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> object, or the <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">NULL</a> pointer if an error occurred during instantiation. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If an error occurs when <a class="el" href="mpsc_8h.html#structmpsc__create__params__t">mpsc_create_params_t</a> 's <code>error_handling_enabled = false</code>, information about the error will be printed to <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/stdout.3.html">stderr</a> and the process will be terminated, in which case the returned value doesn't need assertion. If, on the other hand, <code>error_handling_enabled = true</code>, then <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">NULL</a> will be returned and a handleable error will be available on <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">errno</a> . It should be noted, however, that not all errors can be handled by the application: some errors will always, regardless of <code>error_handling_enabled</code>'s value, result in the process being terminated. Currently, the only errors that can be handled by the application are those related to resources exhaustion (i.e., <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">ENOMEM</a> or <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/errno.3.html">EAGAIN</a> ), which, internally, can occur when calling <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/malloc.3p.html">malloc</a> , <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/pthread_create.3.html">pthread_mutex_init</a> , <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/pthread_cond_init.3p.html">pthread_cond_init</a> , or <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/pthread_create.3.html">pthread_create</a> . </dd></dl>

</div>
</div>
<a id="a69c9a697464e5dfe99165a50de2d8a85" name="a69c9a697464e5dfe99165a50de2d8a85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69c9a697464e5dfe99165a50de2d8a85">&#9670;&#160;</a></span>mpsc_join()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> mpsc_join </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The function that must be called on <code>self</code> to wait for the channel close. </p>
<dl class="section note"><dt>Note</dt><dd>- Internally, this function will join the internal consumer thread. Once joined, it will set the internal channel state to closed, and then will join all registered producer threads. Once all internal threads have been joined, <code>self</code> 's internal resources will be destroyed and the memory freed. </dd>
<dd>
- In most applications, this function should be called on the same thread as the thread that was used to instantiate <code>self</code> (i.e., the <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> object). </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A pointer to the <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance to be joined. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab9285fa056335c00331115b9f899abc3" name="ab9285fa056335c00331115b9f899abc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9285fa056335c00331115b9f899abc3">&#9670;&#160;</a></span>mpsc_producer_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> * mpsc_producer_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function that can be used from inside the producer thread callback function to retrieve the application defined context object passed to <a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b">mpsc_register_producer</a> when the producer was registered. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A pointer to the <a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> instance for which to retrieve the application defined context (i.e., the user context). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a>* A pointer to arbitrary memory defined by the application, which contains the "user context object". </dd></dl>

</div>
</div>
<a id="aa5de01421741cdeb95863c6e8e9ebd12" name="aa5de01421741cdeb95863c6e8e9ebd12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5de01421741cdeb95863c6e8e9ebd12">&#9670;&#160;</a></span>mpsc_producer_ping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a> mpsc_producer_ping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function that can be used from inside a producer thread callback to check whether the channel to which <code>self</code> belongs is still opened. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A pointer to the <a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> instance for which to check whether the channel is still open. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a> A boolean value indicating whether the underlying channel is still open (<code>true</code>) or whether it has been marked as closed (<code>false</code>). </dd></dl>
<dl class="section note"><dt>Note</dt><dd>A producer thread callback function should return when its channel has been marked as closed, to avoid making the application's call to <a class="el" href="mpsc_8h.html#a69c9a697464e5dfe99165a50de2d8a85">mpsc_join</a> hang. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#a795dcdec3e2e202d4f737c576d8d8ebc" title="The function used (from inside a producer thread callback function) to send a message to the channel&#39;...">mpsc_producer_send</a>, <a class="el" href="mpsc_8h.html#a90ba868061d38426ac5ccdcda3c9c8de" title="Similar to mpsc_producer_send , except that this function is used (from inside a producer thread call...">mpsc_producer_send_empty</a> </dd></dl>

</div>
</div>
<a id="addf258ef9e9e9b16193f3478b7a62b4d" name="addf258ef9e9e9b16193f3478b7a62b4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addf258ef9e9e9b16193f3478b7a62b4d">&#9670;&#160;</a></span>mpsc_producer_register_producer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> mpsc_producer_register_producer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#a88b4d9265cf2d604242a8c047c99663f">mpsc_producer_thread_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An alias for <a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b">mpsc_register_producer</a> , but which is used on an object of type <a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> , to try to register a producer for <code>self</code> 's parent channel object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A pointer to the <a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> object for whose parent (i.e., a <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance) to register a new producer. </td></tr>
    <tr><td class="paramname">callback</td><td>An application defined thread callback function, which conforms to the <a class="el" href="mpsc_8h.html#a88b4d9265cf2d604242a8c047c99663f">mpsc_producer_thread_callback_t</a> interface, to be used by the producer. </td></tr>
    <tr><td class="paramname">context</td><td>An application defined context object that can be retrieved from inside <code>callback</code> by calling the <a class="el" href="mpsc_8h.html#ab9285fa056335c00331115b9f899abc3">mpsc_producer_context</a> function on the <code>callback</code> 's <a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> A value used to report a potential error with the call. Please read the documentation for <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> for more information about the potential errors. A successful call will return <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1ae1157dd4e2767bc00603e648f44fd4d2">MPSC_REGISTER_PRODUCER_ERROR_NONE</a> . </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#a3082240dc5d5af76d3cf8926121a781b" title="The function used to register a new producer for self .">mpsc_register_producer</a>, <a class="el" href="mpsc_8h.html#addf258ef9e9e9b16193f3478b7a62b4d" title="An alias for mpsc_register_producer , but which is used on an object of type mpsc_producer_t ,...">mpsc_producer_register_producer</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function exists for situations in which a producer would like to register other producers to the same channel. </dd></dl>

</div>
</div>
<a id="a795dcdec3e2e202d4f737c576d8d8ebc" name="a795dcdec3e2e202d4f737c576d8d8ebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795dcdec3e2e202d4f737c576d8d8ebc">&#9670;&#160;</a></span>mpsc_producer_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a> mpsc_producer_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/size_t.3type.html">size_t</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The function used (from inside a producer thread callback function) to send a message to the channel's consumer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A pointer to the <a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> instance for which to send a message down the underlying channel, to be delivered to the consumer. </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to arbitrary bytes ( <code>n</code> bytes) to be sent to the channel's consumer. </td></tr>
    <tr><td class="paramname">n</td><td>the message size, in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a> A boolean value indicating whether the message was accepted or not. <code>false</code> means that the channel has been marked as closed and that, as a consequence, the message could not be delivered. <code>true</code> means that the message was successfully copied to the internal buffer and will eventually be picked up and copied by the internal consumer thread for delivery to the consumer callback. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>- The message size (i.e., <code>n</code> ) should never be greater than <a class="el" href="mpsc_8h.html#structmpsc__create__params__t">mpsc_create_params_t</a> 's the <code>buffer_size</code> parameter value (which was specified when creating the channel using <a class="el" href="mpsc_8h.html#a2607f2f926ef5b9bc30a214f96a75c85">mpsc_create</a> ). If <code>n &gt; buffer_size</code>, an error message will be printed to <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/stdout.3.html">stderr</a> and the process will be terminated. </dd>
<dd>
- It is possible to send en empty message using <code>data = NULL</code> and <code>n = 0</code>, although there is a function called <a class="el" href="mpsc_8h.html#a90ba868061d38426ac5ccdcda3c9c8de">mpsc_producer_send_empty</a> that can be used for that purpose. </dd>
<dd>
- The <code>n</code> bytes from <code>data</code> are temporarily copied to the internal buffer. So, if the producer thread callback function implementation uses dynamic memory allocation for <code>data</code> , it must call <a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man3/free.3p.html">free()</a> on that memory when it's no longer needed to avoid a leak. </dd>
<dd>
- In some applications, a producer will not need to send messages to the consumer, and will simply perform a job and return. Once all producer thread callback functions have returned for a particular <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> object, the consumer callback (i.e., <a class="el" href="mpsc_8h.html#ace0eb1eba22305e2a14f2ee80b5c151b">mpsc_consumer_callback_t</a> ) will be called one last time with its <code>closed</code> argument set to <code>true</code>, and the call to <a class="el" href="mpsc_8h.html#a69c9a697464e5dfe99165a50de2d8a85">mpsc_join</a> will return. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#aa5de01421741cdeb95863c6e8e9ebd12" title="A function that can be used from inside a producer thread callback to check whether the channel to wh...">mpsc_producer_ping</a>, <a class="el" href="mpsc_8h.html#a90ba868061d38426ac5ccdcda3c9c8de" title="Similar to mpsc_producer_send , except that this function is used (from inside a producer thread call...">mpsc_producer_send_empty</a> </dd></dl>

</div>
</div>
<a id="a90ba868061d38426ac5ccdcda3c9c8de" name="a90ba868061d38426ac5ccdcda3c9c8de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90ba868061d38426ac5ccdcda3c9c8de">&#9670;&#160;</a></span>mpsc_producer_send_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a> mpsc_producer_send_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Similar to <a class="el" href="mpsc_8h.html#a795dcdec3e2e202d4f737c576d8d8ebc">mpsc_producer_send</a> , except that this function is used (from inside a producer thread callback function) to send an empty message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A pointer to the <a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> instance for which to send a message down the underlying channel, to be delivered to the consumer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="elRef" target="_blank" href="https://man7.org/linux/man-pages/man0/stdbool.h.0p.html">bool</a> A boolean value indicating whether the message was accepted or not. <code>false</code> means that the channel has been marked as closed and that, as a consequence, the message could not be delivered. <code>true</code> means that the message was accepted and will eventually be picked up by the internal consumer thread for delivery to the consumer callback. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>In some applications, a producer will not need to send messages to the consumer, and will simply perform a job and return. Once all producer thread callback functions have returned for a particular <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> object, the consumer callback (i.e., <a class="el" href="mpsc_8h.html#ace0eb1eba22305e2a14f2ee80b5c151b">mpsc_consumer_callback_t</a> ) will be called one last time with its <code>closed</code> argument set to <code>true</code>, and the call to <a class="el" href="mpsc_8h.html#a69c9a697464e5dfe99165a50de2d8a85">mpsc_join</a> will return. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#aa5de01421741cdeb95863c6e8e9ebd12" title="A function that can be used from inside a producer thread callback to check whether the channel to wh...">mpsc_producer_ping</a>, <a class="el" href="mpsc_8h.html#a795dcdec3e2e202d4f737c576d8d8ebc" title="The function used (from inside a producer thread callback function) to send a message to the channel&#39;...">mpsc_producer_send</a> </dd></dl>

</div>
</div>
<a id="a3082240dc5d5af76d3cf8926121a781b" name="a3082240dc5d5af76d3cf8926121a781b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3082240dc5d5af76d3cf8926121a781b">&#9670;&#160;</a></span>mpsc_register_producer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> mpsc_register_producer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mpsc_8h.html#a88b4d9265cf2d604242a8c047c99663f">mpsc_producer_thread_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" target="_blank" href="https://www.gnu.org/software/c-intro-and-ref/manual/html_node/The-Void-Type.html#index-void">void</a> *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The function used to register a new producer for <code>self</code> . </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A pointer to the <a class="el" href="mpsc_8h.html#adab514e353838b0b7710a1786283b64b">mpsc_t</a> instance for which to register a new producer. </td></tr>
    <tr><td class="paramname">callback</td><td>An application defined thread callback function, which conforms to the <a class="el" href="mpsc_8h.html#a88b4d9265cf2d604242a8c047c99663f">mpsc_producer_thread_callback_t</a> interface, to be used by the producer. </td></tr>
    <tr><td class="paramname">context</td><td>An application defined context object that can be retrieved from inside <code>callback</code> by calling the <a class="el" href="mpsc_8h.html#ab9285fa056335c00331115b9f899abc3">mpsc_producer_context</a> function on the <code>callback</code> 's <a class="el" href="mpsc_8h.html#a31b0d44b26d8555554b36edc92fa1d89">mpsc_producer_t</a> argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> A value used to report a potential error with the call. Please read the documentation for <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1">mpsc_register_producer_error_t</a> for more information about the potential errors. A successful call will return <a class="el" href="mpsc_8h.html#ad044672ed6f5c21e650cc61c0f2faed1ae1157dd4e2767bc00603e648f44fd4d2">MPSC_REGISTER_PRODUCER_ERROR_NONE</a> . </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mpsc_8h.html#a3a54610d773504b7ef7c6ed4470e62ef" title="An alias for mpsc_register_producer , but which is used on an object of type mpsc_consumer_t ,...">mpsc_consumer_register_producer</a>, <a class="el" href="mpsc_8h.html#addf258ef9e9e9b16193f3478b7a62b4d" title="An alias for mpsc_register_producer , but which is used on an object of type mpsc_producer_t ,...">mpsc_producer_register_producer</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 10 2024 21:48:28 for lib&lt;mpsc&gt; by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
